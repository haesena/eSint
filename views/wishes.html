
<md-content>
    <div layout="row" layout-margin layout-wrap layout-fill style="padding-bottom: 32px;" ng-cloak>
        <md-whiteframe class="md-whiteframe-4dp sheet"
                       flex-sm="100"
                       flex-xs="100"
                       flex-gt-sm="50">
            <md-toolbar class="md-toolbar-tools md-toolbar-small md-hue-2">
                <span ng-hide="editMode">{{ myWishlist.name }}</span>
                <md-input-container flex md-no-float class="md-primary md-hue-3 input-toolbar" ng-show="editMode">
                    <input ng-model="editList.name">
                </md-input-container>
                <span flex></span>
                <md-button aria-label="Edit Name" class="md-fab md-raised md-mini" ng-click="toggleEdit()">
                    <md-tooltip md-direction="left">
                        Edit Name
                    </md-tooltip>
                    <i ng-class="{'fa fa-check': editMode, 'fa fa-pencil': !editMode}" aria-hidden="true"></i>
                </md-button>
            </md-toolbar>
            <div class="content">
                <div ng-hide="myWishlist.wishes">
                    Your first wish:
                </div>

                <div ng-show="myWishlist.wishes">
                    <md-list class="md-dense" flex>
                        <md-list-item ng-repeat="wish in myWishlist.wishes" class="md-2-line">
                            <div class="md-list-item-text">
                                <span>{{ wish.name }}</span>
                                <p ng-show="wish.linkURL"><a href="{{ wish.linkURL }}" target="_blank">{{ wish.linkTitle || wish.linkURL }}</a></p>
                            </div>
                            <md-divider ng-if="!$last"></md-divider>
                        </md-list-item>
                    </md-list>

                    <md-button class="md-fab md-primary md-mini" aria-label="Link" ng-click="showForm = true;" ng-hide="showForm">
                        <md-tooltip md-direction="right">
                            New wish
                        </md-tooltip>
                        <i class="fa fa-plus" aria-hidden="true"></i>
                    </md-button>
                </div>

                <form name="wish" ng-submit="createWish()" ng-show="showForm || myWishlist.wishes === undefined">
                    <div layout="row">
                        <md-input-container class="md-block" flex>
                            <label>Wish</label>
                            <input required ng-model="newWish.name" name="name">
                            <div ng-messages="wish.name.$error">
                                <div ng-message="required">This is required.</div>
                            </div>
                        </md-input-container>
                        <md-button class="md-fab md-primary md-mini" aria-label="Link" ng-click="toggleLink()">
                            <md-tooltip md-direction="left">
                                Add link
                            </md-tooltip>
                            <i class="fa fa-link" aria-hidden="true"></i>
                        </md-button>
                    </div>

                    <div layout="row" ng-show="showLink">
                        <md-input-container md-no-float class="md-block" flex=33>
                            <label>Title</label>
                            <input ng-model="newWish.linkTitle" name="linkTitle">
                        </md-input-container>
                        <md-input-container md-no-float class="md-block" flex=66>
                            <label>Link</label>
                            <input ng-model="newWish.linkURL" type="url" name="linkURL">
                            <div ng-messages="wish.linkURL.$error">
                                <div ng-message="url">Not a valid URL (ex: http://google.com, https://amazon.com).</div>
                            </div>
                        </md-input-container>
                    </div>
                    <p>Note that once you saved a wish, you will not be able to delete it. Another user might already have marked this gift as taken...</p>

                    <div>
                        <md-button type="submit">Submit</md-button>
                        <md-button ng-click="cancel()">Cancel</md-button>
                    </div>
                </form>
            </div>
        </md-whiteframe>
    </div>
</md-content>